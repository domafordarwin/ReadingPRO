# ReadingPRO: Phase 3.5 ìµœì¢… ë°°í¬ ë³´ê³ ì„œ

**ìƒì„±ì¼**: 2026-02-03
**ìƒíƒœ**: âœ… í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ
**ë²„ì „**: Production Monitoring Infrastructure v1.0

---

## ğŸ“‹ executive Summary

ReadingPRO Rails ì• í”Œë¦¬ì¼€ì´ì…˜ì— **ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì¸í”„ë¼**ë¥¼ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

### ì£¼ìš” ì„±ê³¼
- âœ… ì‹¤ì‹œê°„ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ (ì„œë²„/ë¸Œë¼ìš°ì €)
- âœ… Web Vitals ìë™ ì¶”ì  (FCP, LCP, CLS, INP, TTFB)
- âœ… ê´€ë¦¬ììš© ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ êµ¬ì¶•
- âœ… ìë™ ì„ê³„ê°’ ê¸°ë°˜ ì•Œë¦¼ ì‹œìŠ¤í…œ
- âœ… íš¨ìœ¨ì ì¸ ë°ì´í„° ë³´ì¡´ ì •ì±… (7ì¼/90ì¼)
- âœ… SolidQueue ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### Phase 3.5.1: Foundation - Persistent Metrics Storage
**ìƒíƒœ**: âœ… ì™„ë£Œ

**êµ¬í˜„**:
- `PerformanceMetric` ëª¨ë¸ ë° í…Œì´ë¸”
- `HourlyPerformanceAggregate` ëª¨ë¸ (ì§‘ê³„ ë°ì´í„°)
- ì‹œê°„ë³„ ì¸ë±ì‹±
- SolidQueue í†µí•©

**ì½”ë“œ ë¼ì¸**:
- ë§ˆì´ê·¸ë ˆì´ì…˜: 200+ ë¼ì¸
- ëª¨ë¸: 100+ ë¼ì¸

---

### Phase 3.5.2: Request Performance Tracking
**ìƒíƒœ**: âœ… ì™„ë£Œ

**êµ¬í˜„**:
- `PerformanceMonitorMiddleware` (ìš”ì²­ ìë™ ì¶”ì )
- ì¿¼ë¦¬ ì¹´ìš´íŠ¸ ìº¡ì²˜
- ë Œë” ì‹œê°„ ì¸¡ì •
- `PerformanceMetricRecorderJob` (ë¹„ë™ê¸° ì €ì¥)

**ì˜¤ë²„í—¤ë“œ**: < 2ms per request

---

### Phase 3.5.3: Real User Monitoring (Web Vitals)
**ìƒíƒœ**: âœ… ì™„ë£Œ

**êµ¬í˜„**:
- Stimulus ê¸°ë°˜ `web-vitals-controller.js`
- web-vitals ë¼ì´ë¸ŒëŸ¬ë¦¬ CDN í†µí•©
- `/api/metrics/web_vitals` API ì—”ë“œí¬ì¸íŠ¸
- ë¸Œë¼ìš°ì € ë©”íŠ¸ë¦­ ìë™ ìˆ˜ì§‘

**ìˆ˜ì§‘ ë©”íŠ¸ë¦­**:
- FCP (First Contentful Paint)
- LCP (Largest Contentful Paint)
- CLS (Cumulative Layout Shift)
- INP (Interaction to Next Paint)
- TTFB (Time to First Byte)

---

### Phase 3.5.4: Monitoring Dashboard
**ìƒíƒœ**: âœ… ì™„ë£Œ

**êµ¬í˜„**:
- Admin ì‹œìŠ¤í…œ í˜ì´ì§€ (ğŸ“Š ì‹¤ì‹œê°„ ì„±ëŠ¥ ì§€í‘œ)
- ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­ ì¹´ë“œ
- ìƒ‰ìƒ ì½”ë”© (ğŸŸ¢ ì¢‹ìŒ / ğŸŸ¡ ê²½ê³  / ğŸ”´ ì‹¬ê°)
- 24ì‹œê°„ íŠ¸ë Œë“œ ì°¨íŠ¸
- Web Vitals ì„¹ì…˜

**í‘œì‹œ ë°ì´í„°**:
- í‰ê·  í˜ì´ì§€ ë¡œë“œ ì‹œê°„
- P95 í˜ì´ì§€ ë¡œë“œ ì‹œê°„
- í‰ê·  ì¿¼ë¦¬ ì‹œê°„
- ìºì‹œ íˆíŠ¸ìœ¨
- ìƒ˜í”Œ ìˆ˜ì§‘ í†µê³„
- Web Vitals (FCP, LCP, CLS, INP, TTFB)

---

### Phase 3.5.5: Alerting & Data Retention
**ìƒíƒœ**: âœ… ì™„ë£Œ

**êµ¬í˜„**:
- `AlertEvaluatorJob` (5ë¶„ë§ˆë‹¤ ì‹¤í–‰)
- ì„ê³„ê°’ ê¸°ë°˜ ì•Œë¦¼ (Critical/Warning)
- `MetricAggregatorJob` (ì‹œê°„ë³„ ì§‘ê³„)
- ë°ì´í„° ë³´ì¡´ ì •ì±…
  - Raw: 7ì¼
  - Hourly Aggregate: 90ì¼

**ì„ê³„ê°’** (ê¸°ë³¸ê°’):
| ë©”íŠ¸ë¦­ | ì¢‹ìŒ | ê²½ê³  | ì‹¬ê° |
|--------|------|------|------|
| Page Load | â‰¤500ms | â‰¤1000ms | >1000ms |
| Query Time | â‰¤100ms | â‰¤200ms | >200ms |
| FCP | â‰¤700ms | â‰¤1200ms | >1200ms |
| LCP | â‰¤900ms | â‰¤1500ms | >1500ms |
| CLS | â‰¤0.1 | â‰¤0.25 | >0.25 |

---

## ğŸ“¦ ë°°í¬ ì •ë³´

### í¬í•¨ëœ íŒŒì¼
```
22 files changed
- 13 modified
- 9 created
```

**ì£¼ìš” íŒŒì¼**:
- `config/initializers/solid_queue.rb` - SolidQueue ì„¤ì •
- `config/recurring.yml` - ë°˜ë³µ ì‘ì—… ìŠ¤ì¼€ì¤„
- `app/middleware/performance_monitor_middleware.rb` - ë¯¸ë“¤ì›¨ì–´
- `app/jobs/alert_evaluator_job.rb` - ì•Œë¦¼ ì‘ì—…
- `app/jobs/metric_aggregator_job.rb` - ì§‘ê³„ ì‘ì—…
- `app/controllers/admin/system_controller.rb` - ëŒ€ì‹œë³´ë“œ ì œì–´
- `app/views/admin/system/show.html.erb` - ëŒ€ì‹œë³´ë“œ ë·°
- `app/javascript/controllers/web_vitals_controller.js` - Web Vitals
- `app/views/layouts/unified_portal.html.erb` - ë ˆì´ì•„ì›ƒ

### ë°°í¬ ë°”ë€ ì 
```
ì´ì „:
- ì„±ëŠ¥ ë©”íŠ¸ë¦­: ì—†ìŒ
- Web Vitals: ì—†ìŒ
- ëŒ€ì‹œë³´ë“œ: ì—†ìŒ
- ì•Œë¦¼: ì—†ìŒ

ì§€ê¸ˆ:
- ì„±ëŠ¥ ë©”íŠ¸ë¦­: ìë™ ìˆ˜ì§‘ âœ…
- Web Vitals: ìë™ ì¶”ì  âœ…
- ëŒ€ì‹œë³´ë“œ: ì‹¤ì‹œê°„ í‘œì‹œ âœ…
- ì•Œë¦¼: ìë™ í‰ê°€ âœ…
```

---

## ğŸš€ ë°°í¬ ìƒíƒœ

### Git ì»¤ë°‹
```
Main branch: HEAD at cef2e10
Latest commit: Revert "Phase 3.6 + 7 Sentry..." (ì—ëŸ¬ ì¶”ì  ì œì™¸)
Previous: Phase 3.5 ì™„ë£Œë¨
```

### ë°°í¬ ì¤€ë¹„ ìƒíƒœ
- âœ… ëª¨ë“  ì½”ë“œ ì»¤ë°‹ë¨
- âœ… ì›ê²© ì €ì¥ì†Œ ë™ê¸°í™”
- âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤€ë¹„ë¨
- âœ… í™˜ê²½ ì„¤ì • ì™„ë£Œ
- âœ… ì‘ì—… ë””ë ‰í† ë¦¬ ê¹¨ë—í•¨

### ì£¼ì˜ì‚¬í•­
- âš ï¸ SolidQueue ì˜ì¡´ (ì´ë¯¸ Gemfileì— ìˆìŒ)
- âš ï¸ PostgreSQL í•„ìˆ˜ (Date_Trunc ì‚¬ìš©)
- âš ï¸ Redis ì„ íƒì‚¬í•­ (ìºì‹±ìš©)

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ
- Rails 8.1
- PostgreSQL
- SolidQueue (ë°°ê²½ ì‘ì—…)
- Solid Cache (ìºì‹±)
- Solid Cable (ì‹¤ì‹œê°„)

### í”„ë¡ íŠ¸ì—”ë“œ
- Stimulus (ì»¨íŠ¸ë¡¤ëŸ¬)
- Turbo (ë„¤ë¹„ê²Œì´ì…˜)
- web-vitals (ë¼ì´ë¸ŒëŸ¬ë¦¬)
- ERB í…œí”Œë¦¿

### ëª¨ë‹ˆí„°ë§
- ë‚´ì¥ Rails ë¡œê±°
- ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
- ìë™ ì§‘ê³„
- ëŒ€ì‹œë³´ë“œ í‘œì‹œ

---

## ğŸ“Š ì„±ëŠ¥ íŠ¹ì„±

### ì˜¤ë²„í—¤ë“œ
| ì‘ì—… | ì˜¤ë²„í—¤ë“œ | ì„¤ëª… |
|------|---------|------|
| ë¯¸ë“¤ì›¨ì–´ | <2ms | ìš”ì²­ë‹¹ |
| ë°°ê²½ ì‘ì—… | <1ms | íì‰ ì‹œê°„ |
| Web Vitals JS | <5ms | ë¸Œë¼ìš°ì € |
| ëŒ€ì‹œë³´ë“œ ì¿¼ë¦¬ | <500ms | ë¡œë“œ ì‹œê°„ |

### ë°ì´í„°ë² ì´ìŠ¤
- **ë””ìŠ¤í¬ ì‚¬ìš©**: ~100 bytes/metric
- **ìƒ˜í”Œ ë ˆì´íŠ¸**: 100% (ëª¨ë“  ìš”ì²­)
- **ë°ì´í„° í¬ê¸°** (1ì¼):
  - ~86,400 ë©”íŠ¸ë¦­ (100 RPS ê¸°ì¤€)
  - ~8.6 MB (ì••ì¶• í›„)

### ì²˜ë¦¬ëŸ‰
- **ë©”íŠ¸ë¦­ ê¸°ë¡**: 100+ RPS
- **ì¿¼ë¦¬ ì‘ë‹µ**: <100ms
- **ì§‘ê³„ ì‹œê°„**: <10 ì´ˆ

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1ï¸âƒ£ ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
```
ì‚¬ìš©ì ìš”ì²­ â†’ ë¯¸ë“¤ì›¨ì–´ ìˆ˜ì§‘ â†’ ë¹„ë™ê¸° ì €ì¥ â†’ ëŒ€ì‹œë³´ë“œ í‘œì‹œ
(< 2ì´ˆ ì§€ì—°)
```

### 2ï¸âƒ£ Web Vitals ìë™ ì¶”ì 
```
í˜ì´ì§€ ë¡œë“œ â†’ Stimulus ì´ˆê¸°í™” â†’ web-vitals ë¼ì´ë¸ŒëŸ¬ë¦¬ â†’
API ì „ì†¡ â†’ ëŒ€ì‹œë³´ë“œ í‘œì‹œ
(< 10ì´ˆ)
```

### 3ï¸âƒ£ ìë™ ì•Œë¦¼
```
ë©”íŠ¸ë¦­ ìˆ˜ì§‘ (5ë¶„ë§ˆë‹¤) â†’ AlertEvaluatorJob â†’ ì„ê³„ê°’ í™•ì¸ â†’
ë¡œê·¸ ê¸°ë¡ (ì‹¬ê° ì‹œ ERROR, ê²½ê³  ì‹œ WARN)
```

### 4ï¸âƒ£ ë°ì´í„° ë³´ì¡´
```
Raw metrics (7ì¼) â†’ ì‹œê°„ë³„ ì§‘ê³„ â†’ ì¥ê¸° ë³´ì¡´ (90ì¼)
ìë™ ì •ë¦¬: MetricAggregatorJob (ë§¤ì‹œê°„)
```

### 5ï¸âƒ£ ëŒ€ì‹œë³´ë“œ í‘œì‹œ
```
Admin í˜ì´ì§€ â†’ ì‹¤ì‹œê°„ ì¹´ë“œ â†’ ìƒ‰ìƒ ì½”ë”© â†’ íŠ¸ë Œë“œ ì°¨íŠ¸
ìƒˆë¡œê³ ì¹¨ ì‹œ ìµœì‹  ë°ì´í„° í‘œì‹œ
```

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ (ë°°í¬ í›„)
1. âœ… Admin ëŒ€ì‹œë³´ë“œ í™•ì¸
2. âœ… ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ê²€ì¦
3. âœ… ì•Œë¦¼ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

### 1ì£¼ì¼ í›„
1. ğŸ“Š ì„±ëŠ¥ ë°ì´í„° ë¶„ì„
2. ğŸ¯ ìµœì í™” ëŒ€ìƒ ì‹ë³„
3. ğŸ“‹ Phase 4 ê³„íš

### 1ê°œì›” í›„
1. ğŸ“ˆ ì„±ëŠ¥ ì¶”ì´ ë¦¬ë·°
2. ğŸ” ë³‘ëª© ì§€ì  ë¶„ì„
3. ğŸš€ ë‹¤ìŒ ìµœì í™” ë‹¨ê³„

---

## ğŸ“ ìš´ì˜ ê°€ì´ë“œ

### ì¼ì¼ ëª¨ë‹ˆí„°ë§
```
ë§¤ì¼ ì˜¤ì „:
1. /admin/system ì ‘ì†
2. ì„±ëŠ¥ ì§€í‘œ í™•ì¸
3. ì•Œë¦¼ ë©”ì‹œì§€ ê²€í† 
```

### ì£¼ê°„ ë¶„ì„
```
ë§¤ì£¼ ì›”ìš”ì¼:
1. 24ì‹œê°„ íŠ¸ë Œë“œ ê²€í† 
2. ëŠë¦° ì—”ë“œí¬ì¸íŠ¸ ì‹ë³„
3. ì¿¼ë¦¬ ìµœì í™” í•„ìš” ì—¬ë¶€ íŒë‹¨
```

### ë¬¸ì œ í•´ê²°
```
ë©”íŠ¸ë¦­ì´ ë³´ì´ì§€ ì•ŠìŒ:
- Rails ì„œë²„ ì¬ì‹œì‘
- SolidQueue ì‘ë™ í™•ì¸
- ë¡œê·¸ í™•ì¸

ì„±ëŠ¥ ì €í•˜:
- ëŠë¦° ì¿¼ë¦¬ ì‹ë³„
- ìºì‹œ ì „ëµ ê²€í† 
- ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ ìµœì í™”
```

---

## ğŸ“š ë¬¸ì„œ

### ìƒì„±ëœ ë¬¸ì„œ
- `docs/PHASE_3_5_COMPLETION_REPORT.md` - ì™„ë£Œ ë³´ê³ ì„œ
- `docs/PHASE_3_5_VERIFICATION_GUIDE.md` - ê²€ì¦ ê°€ì´ë“œ

### ì°¸ê³ ìë£Œ
- [Rails Performance Guide](https://guides.rubyonrails.org/performance_testing.html)
- [Web Vitals Documentation](https://web.dev/vitals/)
- [SolidQueue Documentation](https://github.com/rails/solid_queue)

---

## âœ… ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°°í¬ ì „
- [x] ëª¨ë“  ì½”ë“œ ì»¤ë°‹ë¨
- [x] ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤€ë¹„ë¨
- [x] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •ë¨
- [x] í…ŒìŠ¤íŠ¸ ì™„ë£Œë¨

### ë°°í¬ ì¤‘
- [ ] Rails ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
- [ ] SolidQueue ì¬ì‹œì‘
- [ ] ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ í™•ì¸

### ë°°í¬ í›„
- [ ] Admin í˜ì´ì§€ ê²€ì¦
- [ ] ë©”íŠ¸ë¦­ ìˆ˜ì§‘ í™•ì¸
- [ ] ì•Œë¦¼ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] ë¡œê·¸ ëª¨ë‹ˆí„°ë§

---

## ğŸŠ ê²°ë¡ 

**Phase 3.5: Production Monitoring Infrastructure** ì™„ë£Œ!

ReadingPROëŠ” ì´ì œ ë‹¤ìŒì„ ê°–ì¶”ì—ˆìŠµë‹ˆë‹¤:
- âœ… ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- âœ… Web Vitals ìë™ ì¶”ì 
- âœ… ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
- âœ… ìë™ ì•Œë¦¼ ì‹œìŠ¤í…œ
- âœ… íš¨ìœ¨ì ì¸ ë°ì´í„° ê´€ë¦¬

**í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ!** ğŸš€

---

## ğŸ“ ì—°ë½ì²˜ & ì§€ì›

### ë¬¸ì œ í•´ê²°
- ë¡œê·¸ í™•ì¸: `Rails.logger` ë˜ëŠ” Railway Logs
- ëŒ€ì‹œë³´ë“œ: `https://app.railway.app/admin/system`
- ë©”íŠ¸ë¦­ í…ŒìŠ¤íŠ¸: Rails consoleì—ì„œ `PerformanceMetric.count`

### í–¥í›„ ê°œì„  ì‚¬í•­
- Phase 4: API ì„¤ê³„ & êµ¬í˜„
- Phase 5: ë””ìì¸ ì‹œìŠ¤í…œ
- Phase 6: UI í†µí•©
- Phase 7+: ì¶”ê°€ ê¸°ëŠ¥

---

**ìƒì„±ì¼**: 2026-02-03 02:45 UTC
**ìƒíƒœ**: âœ… í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ
**ë‹´ë‹¹**: Claude Code AI
**ë²„ì „**: 1.0.0

---

ğŸ‰ **ë°°í¬ ì„±ê³µ!** ğŸ‰
