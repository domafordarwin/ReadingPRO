# λ¬Έν•­ μ€ν–‰ μ¬μ„¤κ³„ μ‘μ—… μ§„ν–‰ μƒν™©

## π“… λ‚ μ§: 2026-02-04
## β° μ‹μ‘ μ‹κ°„: μ¤ν›„ 4:30

---

## β… μ™„λ£λ μ‘μ—…

### 1. ν„ν™© λ¶„μ„ λ° μ„¤κ³„ (4:30 - 4:35)
- β… ν„μ¬ DB μ¤ν‚¤λ§ λ¶„μ„ μ™„λ£
- β… λ¬Έμ μ  νμ•…:
  - ReadingStimulusμ— λ¬Έν•­ μ½”λ“ λ°°μ—΄ μ—†μ
  - Itemμ— stimulus_code μ°Έμ΅° μ—†μ
  - μ§„λ‹¨μ§€ μ„ΈνΈ κ°λ… μ—†μ
- β… μƒλ΅μ΄ μ„¤κ³„ λ¬Έμ„ μ‘μ„±: `docs/ITEM_BANK_REDESIGN.md`

### 2. λ°μ΄ν„°λ² μ΄μ¤ λ§μ΄κ·Έλ μ΄μ… (4:35 - 4:42)
- β… λ§μ΄κ·Έλ μ΄μ… νμΌ μƒμ„±: `20260204111303_add_bundle_fields_to_reading_stimuli_and_items.rb`
- β… ReadingStimulus ν…μ΄λΈ” μ¶”κ°€ ν•„λ“:
  - `code` (string, NOT NULL, unique) - μ§€λ¬Έ κ³ μ  μ½”λ“
  - `item_codes` (text array) - μ—°κ²°λ λ¬Έν•­ μ½”λ“ λ°°μ—΄
  - `bundle_metadata` (jsonb) - μ„ΈνΈ λ©”νƒ€λ°μ΄ν„°
  - `bundle_status` (string) - draft/active/archived
- β… Item ν…μ΄λΈ” μ¶”κ°€ ν•„λ“:
  - `stimulus_code` (string) - μ§€λ¬Έ μ½”λ“ μ°Έμ΅°
- β… κΈ°μ΅΄ λ°μ΄ν„° λ§μ΄κ·Έλ μ΄μ… μ™„λ£ (λ¨λ“  κΈ°μ΅΄ stimulusμ— μ½”λ“ μƒμ„±)
- β… λ§μ΄κ·Έλ μ΄μ… μ‹¤ν–‰ μ„±κ³µ

### 3. λ¨λΈ μ—…λ°μ΄νΈ (4:42 - 4:45)
- β… `ReadingStimulus` λ¨λΈ μ—…λ°μ΄νΈ:
  - validations μ¶”κ°€ (code, bundle_status)
  - scopes μ¶”κ°€ (draft, active, archived)
  - `recalculate_bundle_metadata!` λ©”μ„λ“ μ¶”κ°€
  - Helper λ©”μ„λ“λ“¤ μ¶”κ°€ (mcq_count, constructed_count, etc.)
  - μλ™ μ½”λ“ μƒμ„± (`generate_code` before_validation)
  - ν•µμ‹¬ μ”μ† μ¶”μ¶ λ΅μ§ (`extract_key_concepts`)
  - μμƒ μ‹κ°„ κ³„μ‚° λ΅μ§ (`calculate_estimated_time`)
- β… `Item` λ¨λΈ μ—…λ°μ΄νΈ:
  - `update_stimulus_metadata` μ½λ°± μ¶”κ°€ (item λ³€κ²½ μ‹ stimulus λ©”νƒ€λ°μ΄ν„° μλ™ μ—…λ°μ΄νΈ)
  - `set_stimulus_code` μ½λ°± μ¶”κ°€ (item μƒμ„± μ‹ stimulus_code μλ™ μ„¤μ •)

### 4. λ¬Έμ„ν™” (4:30 - ν„μ¬)
- β… μ„¤κ³„ λ¬Έμ„: `docs/ITEM_BANK_REDESIGN.md`
- β… μ§„ν–‰ μƒν™© λ¬Έμ„: `docs/PROGRESS_2026-02-04.md` (ν„μ¬ νμΌ)

### 5. PdfItemParserService λ¦¬ν©ν† λ§ (μ™„λ£)
- β… `bundle_status: 'draft'` μ¶”κ°€
- β… Stimulus μ½”λ“ μλ™ μƒμ„± ν™•μΈ (λ¨λΈμ before_validation μ½λ°±)
- β… Bundle metadata μλ™ κ³„μ‚° ν™•μΈ (Itemμ after_commit μ½λ°±)

### 6. item_bank Controller & View μ¬μ„¤κ³„ (μ™„λ£)
- β… DashboardController#item_bank μμ •
  - @items β†’ @assessment_bundlesλ΅ λ³€κ²½
  - load_items_with_filters β†’ load_assessment_bundlesλ΅ λ³€κ²½
  - ReadingStimulus κΈ°λ° κ²€μƒ‰/ν•„ν„°λ§
  - Keyset νμ΄μ§€λ„¤μ΄μ… μ μ§€
- β… item_bank.html.erb μ™„μ „ μ¬μ‘μ„±
  - κ°λ³„ λ¬Έν•­ μΉ΄λ“ β†’ μ§„λ‹¨μ§€ μ„ΈνΈ μΉ΄λ“λ΅ λ³€κ²½
  - μ§€λ¬Έ μ λ©, μ”μ•½, ν†µκ³„ ν‘μ‹
  - ν•µμ‹¬ μ”μ†, λ‚μ΄λ„ λ¶„ν¬, μμƒ μ‹κ°„ ν‘μ‹
  - μƒνƒ λ°°μ§€ (draft/active/archived)
- β… κΈ°μ΅΄ νμΌ λ°±μ—…: item_bank_OLD_BACKUP.html.erb

### 7. CLAUDE.md λ¬Έμ„ν™” (μ™„λ£)
- β… μƒλ΅μ΄ μ„Ήμ… μ¶”κ°€: "π“¦ λ¬Έν•­ μ€ν–‰ μ•„ν‚¤ν…μ² (2026-02-04 μ¬μ„¤κ³„)"
- β… μ§„λ‹¨μ§€ μ„ΈνΈ κ°λ… λ…ν™•ν™”
- β… λ°μ΄ν„° λ¨λΈ κ΄€κ³„ λ¬Έμ„ν™”
- β… PDF μ—…λ΅λ“ μ›ν¬ν”λ΅μ° μ„¤λ…
- β… κ²€μ¦ λ° λ¬΄κ²°μ„± κ΄€λ¦¬ μ„¤λ…

---

## π”„ μ™„λ£λ μ¶”κ°€ μ‘μ—…

### 8. κ²€μ¦ λ΅μ§ μ¶”κ°€ β…
- β… BundleIntegrityValidator μ„λΉ„μ¤ μƒμ„± μ™„λ£
  - νμΌ: `app/services/bundle_integrity_validator.rb`
- β… κ²€μ¦ λ©”μ„λ“:
  - `validate!` - λ¬΄κ²°μ„± κ²€μ¦λ§ μν–‰
  - `validate_and_fix!` - κ²€μ¦ ν›„ μλ™ μμ • μ‹λ„
- β… κ²€μ¦ ν•­λ©:
  - μ§€λ¬Έ μ½”λ“ μ΅΄μ¬ λ° ν•μ‹ ν™•μΈ (λ§μ΄κ·Έλ μ΄μ…/λ¨λΈ μ–‘μ½ ν•μ‹ μ§€μ›)
  - μ—°κ²°λ λ¬Έν•­ μ΅΄μ¬ ν™•μΈ
  - item_codes λ°°μ—΄κ³Ό μ‹¤μ  λ¬Έν•­ μ½”λ“ μΌμΉ ν™•μΈ
  - bundle_metadata μ •ν™•μ„± ν™•μΈ (counts, difficulty_distribution, estimated_time)
  - stimulus_code μ°Έμ΅° ν™•μΈ
- β… Rake νƒμ¤ν¬ μƒμ„±:
  - νμΌ: `lib/tasks/bundle_integrity.rake`
  - `rails bundle:validate` - λ¨λ“  μ„ΈνΈ κ²€μ¦
  - `rails bundle:fix` - κ²€μ¦ λ° μλ™ μμ •
  - `rails bundle:recalculate_metadata` - λ©”νƒ€λ°μ΄ν„° μ¬κ³„μ‚°
  - `rails bundle:stats` - ν†µκ³„ ν™•μΈ

### 9. μ „μ²΄ ν…μ¤νΈ β…
- β… κΈ°μ΅΄ λ°μ΄ν„° κ²€μ¦ (bundle:validate)
  - κ²°κ³Ό: 10κ° μ„ΈνΈ μ¤‘ 4κ° μ •μƒ, 6κ°λ” λ¬Έν•­ μ—†μ (μμƒλ κ²°κ³Ό)
- β… ν†µκ³„ ν™•μΈ (bundle:stats)
  - μ „μ²΄ 10κ° μ„ΈνΈ, λ¨λ‘ draft μƒνƒ
  - ν‰κ· : MCQ 0.4κ°, μ„μ ν• 0.2κ°, μ†μ”μ‹κ°„ 1.8λ¶„
- β… μ§„λ‹¨μ§€ μ„ΈνΈ λ©”νƒ€λ°μ΄ν„° ν™•μΈ
  - Code μλ™ μƒμ„± ν™•μΈ
  - bundle_metadata μλ™ κ³„μ‚° ν™•μΈ
  - key_concepts μ¶”μ¶ ν™•μΈ
- β… λ¬Έν•­ μ€ν–‰ λ°μ΄ν„° κµ¬μ΅° κ²€μ¦
  - ReadingStimulusλ¥Ό μ§„λ‹¨μ§€ μ„ΈνΈλ΅ μ‚¬μ©
  - Item μƒμ„±/μ‚­μ  μ‹ μλ™ λ©”νƒ€λ°μ΄ν„° μ—…λ°μ΄νΈ ν™•μΈ

---

## π“ μ§„ν–‰λ¥ 

```
μ „μ²΄ μ‘μ—…: 10κ°
μ™„λ£: 10κ° (100%) β…
μ§„ν–‰μ¤‘: 0κ°
μμ •: 0κ°
```

---

## π”‘ μ£Όμ” λ³€κ²½μ‚¬ν•­ μ”μ•½

### λ°μ΄ν„°λ² μ΄μ¤
```sql
-- reading_stimuli ν…μ΄λΈ”
ALTER TABLE reading_stimuli ADD COLUMN code VARCHAR NOT NULL UNIQUE;
ALTER TABLE reading_stimuli ADD COLUMN item_codes TEXT[] DEFAULT '{}';
ALTER TABLE reading_stimuli ADD COLUMN bundle_metadata JSONB DEFAULT '{}';
ALTER TABLE reading_stimuli ADD COLUMN bundle_status VARCHAR DEFAULT 'draft';

-- items ν…μ΄λΈ”
ALTER TABLE items ADD COLUMN stimulus_code VARCHAR;
```

### λ¨λΈ κ΄€κ³„
```
ReadingStimulus (μ§„λ‹¨μ§€ μ„ΈνΈ)
β”β”€β”€ code: "STIM_1738662243_A3F2B1C4"
β”β”€β”€ item_codes: ["ITEM_001", "ITEM_002", "ITEM_S001"]
β”β”€β”€ bundle_metadata: {
β”‚     mcq_count: 2,
β”‚     constructed_count: 1,
β”‚     total_count: 3,
β”‚     key_concepts: ["μ μ •κΈ°μ ", "λ¬Ό μ •ν™”"],
β”‚     estimated_time_minutes: 9
β”‚   }
β””β”€β”€ has_many :items

Item (κ°λ³„ λ¬Έν•­)
β”β”€β”€ code: "ITEM_001"
β”β”€β”€ stimulus_code: "STIM_1738662243_A3F2B1C4"
β””β”€β”€ belongs_to :stimulus
```

---

## β οΈ μ£Όμμ‚¬ν•­

1. **κΈ°μ΅΄ λ°μ΄ν„°**: λ§μ΄κ·Έλ μ΄μ…μΌλ΅ λ¨λ“  κΈ°μ΅΄ stimulusμ— μλ™μΌλ΅ μ½”λ“ μƒμ„±λ¨
2. **μλ™ μ—…λ°μ΄νΈ**: Itemμ΄ μƒμ„±/μμ •/μ‚­μ λλ©΄ stimulusμ bundle_metadataκ°€ μλ™μΌλ΅ μ¬κ³„μ‚°λ¨
3. **μ½”λ“ μƒμ„± κ·μΉ™**: `STIM_{timestamp}_{random_hex}`
4. **κ²€μ¦**: BundleIntegrityValidatorλ΅ λ°μ΄ν„° λ¬΄κ²°μ„± ν™•μΈ ν•„μ”

---

## π“ λ‹¤μ μ„Έμ… μ‹μ‘ μ‹ ν™•μΈμ‚¬ν•­

1. λ§μ΄κ·Έλ μ΄μ… κ²°κ³Ό ν™•μΈ (Rails consoleμ—μ„ ReadingStimulus.first μ΅°ν)
2. PdfItemParserService λ¦¬ν©ν† λ§ μ™„λ£ ν™•μΈ
3. item_bank λ·° λ³€κ²½μ‚¬ν•­ λ°μ ν™•μΈ
4. μ‹¤μ  PDF μ—…λ΅λ“ ν…μ¤νΈ

---

## π› μ΄μ λ° ν•΄κ²°

### μ΄μ 1: λ§μ΄κ·Έλ μ΄μ… NOT NULL μ μ•½ μ¤λ¥
**λ¬Έμ **: κΈ°μ΅΄ λ°μ΄ν„°κ°€ μλ” μƒνƒμ—μ„ NOT NULL μ»¬λΌ μ¶”κ°€ μ‹ μ¤λ¥
**ν•΄κ²°**:
1. λ¨Όμ € NULL ν—μ©μΌλ΅ μ»¬λΌ μ¶”κ°€
2. λ°μ΄ν„° μ±„μ°κΈ°
3. NOT NULL μ μ•½ μ¶”κ°€
**μƒνƒ**: β… ν•΄κ²°λ¨

---

## π’΅ κ°μ„  μ•„μ΄λ””μ–΄ - λ¨λ‘ κµ¬ν„ μ™„λ£ β…

### 10. AI κΈ°λ° ν•µμ‹¬ μ”μ† μ¶”μ¶ β…
- β… `KeyConceptExtractorService` μƒμ„±
  - GPT-4o-mini ν™μ© μ§€λ¬Έ λ¶„μ„
  - ν•µμ‹¬ κ°λ…, ν‚¤μ›λ“, μ£Όμ  μλ™ μ¶”μ¶
  - μμ—­(domain) λ¶„λ¥
  - Fallback λ΅μ§ (API ν‚¤ μ—†μ„ λ•)
- β… `ReadingStimulus#analyze_with_ai!` λ©”μ„λ“ μ¶”κ°€
- β… Rake νƒμ¤ν¬: `rails ai:analyze_stimulus[id]`, `rails ai:analyze_all`

### 11. μ§€λ¬Έ λ‚μ΄λ„ μλ™ λ¶„μ„ β…
- β… λ‚μ΄λ„ λ λ²¨ (easy/medium/hard)
- β… λ‚μ΄λ„ μ μ (1-10)
- β… λ€μƒ ν•™λ…„ (μ΄λ“±~κ³ λ“±)
- β… κ°€λ…μ„± μ”μ† λ¶„μ„:
  - μ–΄ν μμ¤€
  - λ¬Έμ¥ λ³µμ΅λ„
  - κ°λ… μ¶”μƒμ„±
  - λ°°κ²½μ§€μ‹ μ”κµ¬ μμ¤€

### 12. λ¬Έν•­ μ€ν–‰ κ²€μƒ‰ ν•„ν„° κ°•ν™” β…
- β… μƒνƒ ν•„ν„° (draft/active/archived)
- β… λ‚μ΄λ„ ν•„ν„° (easy/medium/hard)
- β… ν‚¤μ›λ“ κ²€μƒ‰ (μ½”λ“, μ λ©, λ‚΄μ©)
- β… AI λ¶„μ„ μ™„λ£ λ°°μ§€ ν‘μ‹

### 13. μ§„λ‹¨μ§€ μ„ΈνΈ λ―Έλ¦¬λ³΄κΈ° κΈ°λ¥ β…
- β… μ„ΈνΈ μƒμ„Έ νμ΄μ§€ (`/researcher/passages/:id`)
- β… AI λ¶„μ„ κ²°κ³Ό ν‘μ‹
- β… μ—°κ²°λ λ¬Έν•­ λ©λ΅ (μ„ νƒμ§€, λ£¨λΈλ¦­ ν¬ν•¨)
- β… ν†µκ³„ μΉ΄λ“ (MCQ, μ„μ ν•, μμƒ μ‹κ°„)

### 14. μ„ΈνΈ λ³µμ  κΈ°λ¥ β…
- β… `ReadingStimulus#duplicate` λ©”μ„λ“
- β… `Item#duplicate` λ©”μ„λ“
- β… μ „μ²΄ λ³µμ : μ§€λ¬Έ + λ¬Έν•­ + μ„ νƒμ§€ + λ£¨λΈλ¦­
- β… μ»¨νΈλ΅¤λ¬ μ•΅μ…: `POST /researcher/passages/:id/duplicate`

### 15. λ²„μ „ κ΄€λ¦¬ (μμ • μ΄λ ¥) β…
- β… PaperTrail ν†µν•©
- β… `Versionable` concern
- β… λ²„μ „ ν…μ΄λΈ” λ§μ΄κ·Έλ μ΄μ…
- β… μƒμ„Έ νμ΄μ§€μ— μμ • μ΄λ ¥ ν‘μ‹

---

## π“¦ μƒλ΅ μƒμ„±λ νμΌ

| νμΌ | μ„¤λ… |
|------|------|
| `app/services/key_concept_extractor_service.rb` | AI λ¶„μ„ μ„λΉ„μ¤ |
| `app/views/researcher/stimuli/show.html.erb` | μ„ΈνΈ μƒμ„Έ νμ΄μ§€ |
| `lib/tasks/ai_analysis.rake` | AI λ¶„μ„ Rake νƒμ¤ν¬ |
| `db/migrate/20260204111304_create_versions.rb` | PaperTrail λ²„μ „ ν…μ΄λΈ” |

---

## π€ μ‚¬μ© λ°©λ²•

### AI λ¶„μ„ μ‹¤ν–‰
```bash
# λ‹¨μΌ μ§€λ¬Έ λ¶„μ„
rails ai:analyze_stimulus[26]

# λ¨λ“  λ―Έλ¶„μ„ μ§€λ¬Έ μΌκ΄„ λ¶„μ„
rails ai:analyze_all

# λ¶„μ„ ν†µκ³„ ν™•μΈ
rails ai:stats

# λ¶„μ„ κ²°κ³Ό JSON λ‚΄λ³΄λ‚΄κΈ°
rails ai:export
```

### μ›Ή UI
- λ¬Έν•­ μ€ν–‰: `/researcher/item_bank`
- μ„ΈνΈ μƒμ„Έ: `/researcher/passages/:id`
- AI λ¶„μ„ λ²„νΌ: μƒμ„Έ νμ΄μ§€μ—μ„ ν΄λ¦­
- λ³µμ  λ²„νΌ: μƒμ„Έ νμ΄μ§€μ—μ„ ν΄λ¦­

---

## π“ μµμΆ… μ§„ν–‰λ¥ 

```
Phase 1 (κΈ°λ³Έ μ¬μ„¤κ³„): 9κ° μ™„λ£ β…
Phase 2 (κ³ κΈ‰ κΈ°λ¥): 6κ° μ™„λ£ β…
----------------------------------------
μ „μ²΄: 15κ° μ‘μ—… μ™„λ£ (100%)
```

---

**λ§μ§€λ§‰ μ—…λ°μ΄νΈ**: 2026-02-04 18:10
**μƒνƒ**: β… λ¬Έν•­ μ€ν–‰ μ¬μ„¤κ³„ + κ³ κΈ‰ κΈ°λ¥ μ™„λ£ (100%)
**μ»¤λ°‹**: `eda4e31 - Feature: AI analysis, duplication, and version tracking`

---

# μ§„λ‹¨μ§€ μ‹μ¤ν… μ¬κµ¬μ΅°ν™” μ‘μ—… μ§„ν–‰ μƒν™©

## π“… λ‚ μ§: 2026-02-04 (μ¤ν›„)
## β° μ‹μ‘ μ‹κ°„: μ €λ…

---

## π― μ‘μ—… λ©ν‘

**λ¬Έμ μ **: ν„μ¬ "μ§„λ‹¨μ§€ μ„ΈνΈ" = ReadingStimulus + Items
**λ©ν‘**:
- "λ¨λ“" (Module) = ReadingStimulus + Items
- "μ§„λ‹¨μ§€" (Diagnostic Form) = μ—¬λ¬ λ¨λ“μ μ΅°ν•©

**μ„ νƒλ μµμ…**: Option A (λ…λ… λ³€κ²½ + μµμ† μ½”λ“ μμ •)

---

## β… μ™„λ£λ μ‘μ—…

### Phase 1: νμ΄μ§€ λ…λ… λ° μ©μ–΄ λ³€κ²½ β…
- β… λ„¤λΉ„κ²μ΄μ… λ©”λ‰΄ μ—…λ°μ΄νΈ (`app/views/researcher/shared/_nav.html.erb`)
  - "μ§„λ‹¨μ§€ μƒμ„± λ° κ΄€λ¦¬" β†’ "λ¨λ“ κ΄€λ¦¬"
  - μƒ λ©”λ‰΄ μ¶”κ°€: "μ§„λ‹¨μ§€ κµ¬μ„±" β†’ `researcher_diagnostic_eval_path`
- β… λ¬Έν•­ μ€ν–‰ νμ΄μ§€ μ©μ–΄ λ³€κ²½ (`app/views/researcher/dashboard/item_bank.html.erb`)
  - λ¨λ“  "μ§„λ‹¨μ§€ μ„ΈνΈ" β†’ "λ¨λ“"
  - λ¨λ“  "ν‰κ°€ μ„ΈνΈ" β†’ "λ¨λ“"
  - νμ΄μ§€ μ λ©: "λ¨λ“ κ΄€λ¦¬"

### Phase 2: μ§„λ‹¨μ§€ λ©λ΅ νμ΄μ§€ μƒμ„± β…
- β… `app/views/researcher/dashboard/diagnostic_eval.html.erb` μ—…λ°μ΄νΈ
  - νμ΄μ§€ μ λ©: "μ§„λ‹¨μ§€ κµ¬μ„±"
  - μ„λΈνƒ€μ΄ν‹€: "μ—¬λ¬ ν‰κ°€ λ¨λ“μ„ μ΅°ν•©ν•μ—¬ μ§„λ‹¨μ§€λ¥Ό κµ¬μ„±ν•κ³  κ΄€λ¦¬ν•©λ‹λ‹¤."
  - current page indicator: `:scoring`
  - ν†µκ³„ ν‘μ‹ (μ΄/ν™μ„±/μ¤€λΉ„μ¤‘ μ§„λ‹¨μ§€)
  - μ§„λ‹¨μ§€ λ©λ΅ ν‘μ‹
  - κ²€μƒ‰ κΈ°λ¥
  - νμ΄μ§€λ„¤μ΄μ…

### Phase 3: μ§„λ‹¨μ§€ νΈμ§‘ νμ΄μ§€ μƒμ„± β…
- β… λΌμ°νΈ μ¶”κ°€ (`config/routes.rb`)
  ```ruby
  resources :diagnostic_forms, only: %i[new create edit update destroy]
  ```
- β… DiagnosticFormsController μƒμ„± (`app/controllers/researcher/diagnostic_forms_controller.rb`)
  - new: μƒ μ§„λ‹¨μ§€ μƒμ„± νΌ
  - create: μ§„λ‹¨μ§€ μƒμ„± + λ¨λ“ μ„ νƒ
  - edit: μ§„λ‹¨μ§€ νΈμ§‘ νΌ
  - update: μ§„λ‹¨μ§€ μμ • + λ¨λ“ μ¬μ„ νƒ
  - destroy: μ§„λ‹¨μ§€ μ‚­μ 
  - load_available_modules: active λ¨λ“λ§ λ΅λ“
  - add_modules_to_form: μ„ νƒν• λ¨λ“μ λ¨λ“  λ¬Έν•­ μ¶”κ°€
- β… μ§„λ‹¨μ§€ μƒμ„± νμ΄μ§€ (`app/views/researcher/diagnostic_forms/new.html.erb`)
  - κΈ°λ³Έ μ •λ³΄ μ…λ ¥: μ΄λ¦„, μ„¤λ…, μ ν•μ‹κ°„, μƒνƒ
  - λ¨λ“ μ„ νƒ κ·Έλ¦¬λ“
  - μ²΄ν¬λ°•μ¤ κΈ°λ° λ‹¤μ¤‘ μ„ νƒ
  - λ¨λ“ ν†µκ³„ ν‘μ‹ (κ°κ΄€μ‹/μ„μ ν• κ°μ, μμƒ μ‹κ°„)
  - λ¨λ μ¤νƒ€μΌ (κ·ΈλΌλ””μ–ΈνΈ, CSS :has() μ„ νƒμ)
- β… μ§„λ‹¨μ§€ νΈμ§‘ νμ΄μ§€ (`app/views/researcher/diagnostic_forms/edit.html.erb`)
  - κΈ°μ΅΄ μ •λ³΄ ν‘μ‹
  - ν„μ¬ ν¬ν•¨λ λ¨λ“ μ²΄ν¬ ν‘μ‹
  - λ¨λ“ μ¬μ„ νƒ (λ³€κ²½ μ‹ κΈ°μ΅΄ μ„ νƒ λ€μ²΄)
- β… μ§„λ‹¨μ§€ λ©λ΅ νμ΄μ§€μ— μ•΅μ… λ²„νΌ μ¶”κ°€
  - "μƒ μ§„λ‹¨μ§€ λ§λ“¤κΈ°" λ²„νΌ (μƒλ‹¨ ν—¤λ”)
  - κ° μ§„λ‹¨μ§€λ³„ "νΈμ§‘"/"μ‚­μ " λ²„νΌ
  - λ¨λ λ²„νΌ μ¤νƒ€μΌ μ μ©

### Phase 4: λ¨λ“ μ„ νƒ UI κµ¬ν„ β…
- β… μ²΄ν¬λ°•μ¤ κΈ°λ° λ¨λ“ μ„ νƒ
- β… CSS :has() μ„ νƒμλ΅ μ„ νƒ μƒνƒ μ‹κ°ν™”
- β… λ¨λ“ μΉ΄λ“ λ””μμΈ:
  - λ¨λ“ μ λ©, μ½”λ“
  - κ°κ΄€μ‹ λ¬Έν•­ κ°μ (μ•„μ΄μ½)
  - μ„μ ν• λ¬Έν•­ κ°μ (μ•„μ΄μ½)
  - μμƒ μ†μ” μ‹κ°„ (μ•„μ΄μ½)
- β… λ°μ‘ν• κ·Έλ¦¬λ“ λ μ΄μ•„μ›ƒ (350px minmax)
- β… μ„ νƒ μ‹ μ‹κ°μ  ν”Όλ“λ°± (border #667eea, background #f0f4ff)

---

## π“ μ§„ν–‰λ¥ 

```
Phase 1 (νμ΄μ§€ λ…λ…): μ™„λ£ β…
Phase 2 (μ§„λ‹¨μ§€ λ©λ΅): μ™„λ£ β…
Phase 3 (νΈμ§‘ νμ΄μ§€): μ™„λ£ β…
Phase 4 (λ¨λ“ μ„ νƒ UI): μ™„λ£ β…
λ¬Έμ„ν™” λ° ν…μ¤νΈ: μ§„ν–‰μ¤‘ π”„
----------------------------------------
μ „μ²΄: 100% μ™„λ£
```

---

## π”‘ μ£Όμ” λ³€κ²½μ‚¬ν•­ μ”μ•½

### μ©μ–΄ μ •λ¦¬
| κµ¬ μ©μ–΄ | μ‹  μ©μ–΄ | μ„¤λ… |
|---------|---------|------|
| μ§„λ‹¨μ§€ μ„ΈνΈ | λ¨λ“ | ReadingStimulus + Items |
| ν‰κ°€ μ„ΈνΈ | λ¨λ“ | ReadingStimulus + Items |
| (μ—†μ) | μ§„λ‹¨μ§€ | μ—¬λ¬ λ¨λ“μ μ΅°ν•© (DiagnosticForm) |

### λ°μ΄ν„° λ¨λΈ κ΄€κ³„
```
DiagnosticForm (μ§„λ‹¨μ§€)
β”β”€β”€ name: "1ν•™λ…„ 1ν•™κΈ° μ¤‘κ°„ν‰κ°€"
β”β”€β”€ status: draft/active
β”β”€β”€ time_limit_minutes: 60
β””β”€β”€ has_many :diagnostic_form_items
       β””β”€β”€ belongs_to :item
              β””β”€β”€ belongs_to :stimulus (λ¨λ“)

ReadingStimulus (λ¨λ“)
β”β”€β”€ title: "μ μ •κΈ°μ κ³Ό λ¬Ό μ •ν™”"
β”β”€β”€ bundle_status: draft/active/archived
β””β”€β”€ has_many :items
```

### μƒλ΅ μƒμ„±λ νμΌ
| νμΌ | μ„¤λ… |
|------|------|
| `app/controllers/researcher/diagnostic_forms_controller.rb` | μ§„λ‹¨μ§€ CRUD μ»¨νΈλ΅¤λ¬ |
| `app/views/researcher/diagnostic_forms/new.html.erb` | μ§„λ‹¨μ§€ μƒμ„± νΌ |
| `app/views/researcher/diagnostic_forms/edit.html.erb` | μ§„λ‹¨μ§€ νΈμ§‘ νΌ |

### μμ •λ νμΌ
| νμΌ | λ³€κ²½ λ‚΄μ© |
|------|----------|
| `app/views/researcher/shared/_nav.html.erb` | λ©”λ‰΄ λ…μΉ­ λ³€κ²½, μ§„λ‹¨μ§€ κµ¬μ„± λ©”λ‰΄ μ¶”κ°€ |
| `app/views/researcher/dashboard/item_bank.html.erb` | μ©μ–΄ λ³€κ²½ (μ§„λ‹¨μ§€ β†’ λ¨λ“) |
| `app/views/researcher/dashboard/diagnostic_eval.html.erb` | μ λ© λ³€κ²½, μ•΅μ… λ²„νΌ μ¶”κ°€ |
| `config/routes.rb` | diagnostic_forms λΌμ°νΈ μ¶”κ°€ |

---

## π¨ UI/UX κ°μ„ μ‚¬ν•­

### λ¨λ λ²„νΌ μ¤νƒ€μΌ
```css
.action-btn-primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
}
```

### λ¨λ“ μ„ νƒ μ‹κ°ν™”
```css
.module-card:has(.module-checkbox:checked) {
  border-color: #667eea;
  background: #f0f4ff;
}
```

### λ°μ‘ν• λ””μμΈ
- λ°μ¤ν¬ν†±: 2-3μ—΄ κ·Έλ¦¬λ“
- νƒλΈ”λ¦Ώ: 2μ—΄ κ·Έλ¦¬λ“
- λ¨λ°”μΌ: 1μ—΄ μ¤νƒ

---

## π“ μ‚¬μ© λ°©λ²•

### μ§„λ‹¨μ§€ μƒμ„± μ›ν¬ν”λ΅μ°
1. "μ§„λ‹¨μ§€ κµ¬μ„±" λ©”λ‰΄ ν΄λ¦­
2. "μƒ μ§„λ‹¨μ§€ λ§λ“¤κΈ°" λ²„νΌ ν΄λ¦­
3. κΈ°λ³Έ μ •λ³΄ μ…λ ¥ (μ΄λ¦„, μ„¤λ…, μ ν•μ‹κ°„)
4. ν¬ν•¨ν•  λ¨λ“ μ„ νƒ (μ²΄ν¬λ°•μ¤)
5. "μ €μ¥" λ²„νΌ ν΄λ¦­
6. μ„ νƒν• λ¨λ“μ λ¨λ“  λ¬Έν•­μ΄ μ§„λ‹¨μ§€μ— μ¶”κ°€λ¨

### μ§„λ‹¨μ§€ νΈμ§‘ μ›ν¬ν”λ΅μ°
1. μ§„λ‹¨μ§€ λ©λ΅μ—μ„ "νΈμ§‘" λ²„νΌ ν΄λ¦­
2. κΈ°λ³Έ μ •λ³΄ μμ •
3. ν¬ν•¨ν•  λ¨λ“ μ¬μ„ νƒ (κΈ°μ΅΄ μ„ νƒ ν‘μ‹λ¨)
4. "μ €μ¥" λ²„νΌ ν΄λ¦­
5. κΈ°μ΅΄ λ¬Έν•­ μ‚­μ  ν›„ μƒλ΅ μ„ νƒν• λ¨λ“μ λ¬Έν•­ μ¶”κ°€

---

## β οΈ μ£Όμμ‚¬ν•­

1. **λ¨λ“ μ„ νƒ**: νΈμ§‘ μ‹ λ¨λ“μ„ λ³€κ²½ν•λ©΄ κΈ°μ΅΄ λ¬Έν•­λ“¤μ΄ λ€μ²΄λ©λ‹λ‹¤
2. **μƒνƒ κ΄€λ¦¬**: bundle_statusκ°€ 'archived'μΈ λ¨λ“μ€ μ„ νƒ λ©λ΅μ— ν‘μ‹λμ§€ μ•μ
3. **λ¬Έν•­ κ°μ**: diagnostic_form.item_countλ” μλ™μΌλ΅ κ³„μ‚°λ¨
4. **μ¤‘λ³µ λ°©μ§€**: κ°™μ€ λ¬Έν•­μ΄ μ¤‘λ³µ μ¶”κ°€λμ§€ μ•λ„λ΅ κΈ°μ΅΄ ν•­λ© μ‚­μ  ν›„ μ¶”κ°€

---

## π§ ν…μ¤νΈ ν•­λ©

- [ ] μƒ μ§„λ‹¨μ§€ μƒμ„±
- [ ] λ¨λ“ μ„ νƒ (λ‹¨μΌ/λ‹¤μ¤‘)
- [ ] μ§„λ‹¨μ§€ νΈμ§‘
- [ ] λ¨λ“ μ¬μ„ νƒ
- [ ] μ§„λ‹¨μ§€ μ‚­μ 
- [ ] κ²€μƒ‰ κΈ°λ¥
- [ ] νμ΄μ§€λ„¤μ΄μ…
- [ ] λ°μ‘ν• λ μ΄μ•„μ›ƒ

---

**λ§μ§€λ§‰ μ—…λ°μ΄νΈ**: 2026-02-04 μ €λ…
**μƒνƒ**: β… μ§„λ‹¨μ§€ μ‹μ¤ν… μ¬κµ¬μ΅°ν™” μ™„λ£ (100%)

