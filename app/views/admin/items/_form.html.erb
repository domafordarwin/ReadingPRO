<%= form_with model: [:admin, @item], local: true do |form| %>
  <% if @item.errors.any? %>
    <div class="admin-card">
      <p>저장 중 오류가 발생했습니다.</p>
      <ul>
        <% @item.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="admin-card">
    <div class="admin-form">
      <div>
        <%= form.label :code, "문항 코드" %>
        <%= form.text_field :code, class: "admin-input small" %>
      </div>
      <div>
        <%= form.label :item_type, "유형" %>
        <%= form.select :item_type, Item.item_types.keys, {}, class: "admin-select small" %>
      </div>
      <div>
        <%= form.label :status, "상태" %>
        <%= form.select :status, Item.statuses.keys, {}, class: "admin-select small" %>
      </div>
      <div>
        <%= form.label :difficulty, "난이도" %>
        <%= form.text_field :difficulty, class: "admin-input small" %>
      </div>
      <div>
        <%= form.label :stimulus_id, "지문" %>
        <%= form.select :stimulus_id, options_from_collection_for_select(@stimuli, :id, :code, @item.stimulus_id), { include_blank: "선택" }, class: "admin-select small" %>
      </div>
    </div>

    <div class="admin-divider"></div>

    <div>
      <%= form.label :prompt, "문항 내용" %>
      <%= form.text_area :prompt, rows: 4, class: "admin-textarea" %>
    </div>

    <div>
      <%= form.label :explanation, "해설" %>
      <%= form.text_area :explanation, rows: 3, class: "admin-textarea" %>
    </div>

    <div class="admin-actions">
      <%= form.submit "저장", class: "admin-button primary" %>
      <%= link_to "취소", admin_items_path, class: "admin-button" %>
    </div>
  </div>
<% end %>
