<% content_for :page_title, "학교 정보 수정" %>

<div class="rp-page-header">
  <h1 class="rp-page-header__title">학교 정보 수정</h1>
  <p class="rp-page-header__subtitle"><%= @school.name %>의 정보를 수정합니다</p>
</div>

<div class="rp-card">
  <% if @school.errors.any? %>
    <div class="rp-flash rp-flash--alert" style="margin-bottom: 20px;">
      <strong>오류가 발생했습니다:</strong>
      <ul style="margin: 8px 0 0 16px;">
        <% @school.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form_with model: @school, url: diagnostic_teacher_school_path(@school), method: :patch, local: true, data: { turbo: false } do |f| %>
    <h2 class="rp-section-title" style="margin-bottom: 16px;">학교 정보</h2>

    <div class="rp-form-row">
      <div class="rp-form-group">
        <%= f.label :name, "학교명" %> <span style="color: #dc2626;">*</span>
        <%= f.text_field :name, class: "rp-input", required: true, placeholder: "예: 신명중학교" %>
      </div>

      <div class="rp-form-group">
        <%= f.label :region, "지역" %>
        <%= f.text_field :region, class: "rp-input", placeholder: "예: 충북 충주시" %>
      </div>

      <div class="rp-form-group">
        <%= f.label :district, "구/군" %>
        <%= f.text_field :district, class: "rp-input", placeholder: "예: 수정구" %>
      </div>

      <div class="rp-form-group">
        <%= f.label :email_domain, "이메일 도메인" %> <span style="color: #dc2626;">*</span>
        <%= f.text_field :email_domain, class: "rp-input", required: true, placeholder: "예: shinmyung.edu" %>
        <p style="font-size: 12px; color: #94a3b8; margin-top: 4px;">학생/학부모 이메일 생성 시 사용됩니다 (예: shinmyung_s-0001@shinmyung.edu)</p>
      </div>
    </div>

    <div class="rp-form-actions">
      <%= f.submit "저장", class: "rp-btn rp-btn--primary" %>
      <%= link_to "취소", diagnostic_teacher_managers_path, class: "rp-btn rp-btn--secondary" %>
    </div>
  <% end %>
</div>

<style>
  .rp-page-header { margin-bottom: 24px; }
  .rp-page-header__title { font-size: 28px; font-weight: 700; color: #0f172a; margin: 0 0 8px 0; }
  .rp-page-header__subtitle { font-size: 14px; color: #94a3b8; margin: 0; }
  .rp-card { background: white; border: 1px solid #e2e8f0; border-radius: 12px; padding: 24px; max-width: 700px; }
  .rp-section-title { font-size: 18px; font-weight: 600; color: #0f172a; margin: 0; }
  .rp-form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; }
  .rp-form-group { margin-bottom: 16px; }
  .rp-form-group label { display: block; font-weight: 500; color: #0f172a; margin-bottom: 6px; font-size: 14px; }
  .rp-input { width: 100%; padding: 10px 12px; border: 1px solid #cbd5e1; border-radius: 6px; font-family: inherit; font-size: 14px; }
  .rp-input:focus { outline: none; border-color: #2f5bff; box-shadow: 0 0 0 2px rgba(47,91,255,0.1); }
  .rp-form-actions { display: flex; gap: 8px; margin-top: 24px; }
  .rp-btn { padding: 10px 16px; border-radius: 6px; font-size: 14px; font-weight: 500; border: none; cursor: pointer; text-decoration: none; display: inline-block; }
  .rp-btn--primary { background: #2f5bff; color: white; }
  .rp-btn--secondary { background: #f1f5f9; color: #64748b; border: 1px solid #cbd5e1; }
  .rp-flash--alert { background: #fef2f2; border: 1px solid #fecaca; color: #991b1b; padding: 12px 16px; border-radius: 8px; }
</style>
