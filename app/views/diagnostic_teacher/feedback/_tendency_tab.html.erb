<div class="rp-tab-pane" data-tab="tendency">
  <div class="rp-tendency-header">
    <h2 style="margin: 0 0 20px 0; font-size: 16px; font-weight: 600; color: #0f172a;">
      독자 성향 분석
    </h2>
    <p style="margin: 0; font-size: 13px; color: #64748b;">학생의 독서 행동 패턴 및 특성 분석</p>
  </div>

  <div class="rp-tendency-feedback-container">
    <!-- 왼쪽: 중첩된 탭 (성향 핵심 진단 / 교육적 제언) -->
    <div class="rp-tendency-left-panel">
      <div class="rp-nested-tabs-nav">
        <button class="rp-nested-tab-button active" data-nested-tab="diagnosis">성향 핵심 진단</button>
        <button class="rp-nested-tab-button" data-nested-tab="recommendations">교육적 제언</button>
      </div>

      <div class="rp-nested-tabs-content">
        <!-- 성향 핵심 진단 -->
        <div class="rp-nested-tab-pane active" data-nested-tab="diagnosis">
          <% @diagnosis_items.each do |key, item| %>
            <div class="rp-diagnosis-item" data-item="<%= key %>" style="border: 1px solid #e2e8f0; border-radius: 8px; padding: 12px; margin-bottom: 12px; background: #f8fafc; cursor: pointer; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#cbd5e1'; this.style.boxShadow='0 2px 4px rgba(0, 0, 0, 0.05)'" onmouseout="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
              <div class="rp-diagnosis-header" style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #e2e8f0;">
                <span style="font-size: 18px;"><%= item[:icon] %></span>
                <h4 style="margin: 0; font-size: 13px; font-weight: 600; color: #0f172a; flex: 1;">
                  <%= item[:title] %>
                </h4>
              </div>
              <div class="rp-diagnosis-content" style="background: white; padding: 8px; border-radius: 4px;">
                <p style="margin: 0; font-size: 12px; line-height: 1.5; color: #475569;">
                  <%= item[:content] %>
                </p>
              </div>
            </div>
          <% end %>
        </div>

        <!-- 교육적 제언 -->
        <div class="rp-nested-tab-pane" data-nested-tab="recommendations">
          <% @recommendation_items.each do |key, item| %>
            <div class="rp-recommendation-item" data-item="<%= key %>" style="border: 1px solid #e2e8f0; border-radius: 8px; padding: 12px; margin-bottom: 12px; background: #f8fafc; cursor: pointer; transition: all 0.2s ease;" onmouseover="this.style.borderColor='#cbd5e1'; this.style.boxShadow='0 2px 4px rgba(0, 0, 0, 0.05)'" onmouseout="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
              <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #e2e8f0;">
                <span style="font-size: 18px;"><%= item[:icon] %></span>
                <h4 style="margin: 0; font-size: 13px; font-weight: 600; color: #0f172a; flex: 1;">
                  <%= item[:title] %>
                </h4>
              </div>
              <div class="rp-recommendation-content" style="background: white; padding: 8px; border-radius: 4px;">
                <p style="margin: 0; font-size: 12px; line-height: 1.5; color: #475569;">
                  <%= item[:content] %>
                </p>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <!-- 오른쪽: 콘텐츠 표시 영역 -->
    <div class="rp-tendency-right-panel">
      <div class="rp-content-display-area">
        <div class="rp-tendency-type-badge" style="display: flex; flex-direction: column; align-items: center; text-align: center; padding: 20px; background: linear-gradient(135deg, #f0f9ff 0%, #dbeafe 100%); border: 2px solid #0ea5e9; border-radius: 12px; margin-bottom: 16px;">
          <div class="rp-tendency-type-badge-icon" style="font-size: 48px; line-height: 1; margin-bottom: 12px;">
            📚
          </div>
          <h3 style="margin: 0; font-size: 18px; font-weight: 700; color: #0284c7;">
            독자 성향 분석
          </h3>
          <p style="margin: 4px 0 0; font-size: 12px; color: #0ea5e9;">
            독서 습관 및 성향 파악
          </p>
        </div>

        <div class="rp-tendency-type-characteristics" style="background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 12px; margin-bottom: 16px;">
          <h4 style="margin: 0 0 8px 0; font-size: 12px; font-weight: 600; color: #0f172a;">독자 유형</h4>
          <p style="margin: 0; font-size: 12px; line-height: 1.6; color: #475569;">
            <%= @reader_tendency&.reader_type_description || "독자 유형 분석 중입니다." %>
          </p>
        </div>

        <div class="rp-tendency-display-content" style="padding: 16px; background: white; border: 1px solid #e2e8f0; border-radius: 8px; min-height: 200px; max-height: 400px; overflow-y: auto;">
          <h4 style="margin: 0 0 12px 0; font-size: 13px; font-weight: 600; color: #0f172a;">흥미도 분석</h4>
          <div class="rp-content-text" style="font-size: 12px; line-height: 1.7; color: #475569; white-space: pre-wrap;">
            <%= @reader_tendency&.interest_analysis || "흥미도 분석 데이터 수집 중..." %>
          </div>
        </div>

        <div class="rp-tendency-metadata" style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #e2e8f0; font-size: 11px; color: #94a3b8;">
          <small>마지막 업데이트: <%= @reader_tendency&.updated_at&.strftime("%Y-%m-%d %H:%M") || "진행 중" %></small>
        </div>
      </div>
    </div>
  </div>
</div>
