<div class="rp-tab-pane" data-tab="tendency">
  <div class="rp-tendency-header">
    <h2 style="margin: 0 0 20px 0; font-size: 16px; font-weight: 600; color: #0f172a;">
      독자 성향 분석
    </h2>
    <p style="margin: 0; font-size: 13px; color: #64748b;">학생의 독서 행동 패턴 및 특성 분석</p>
  </div>

  <% if @reader_tendency.blank? %>
    <!-- No Data State -->
    <div style="padding: 40px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; text-align: center;">
      <p style="margin: 0 0 8px 0; font-size: 14px; font-weight: 600; color: #64748b;">📊 독자 성향 데이터 없음</p>
      <p style="margin: 0; font-size: 12px; color: #94a3b8;">이 학생의 진단을 완료하면 독자 성향 분석이 자동으로 생성됩니다.</p>
    </div>
  <% else %>
    <!-- Reader Tendency Content -->
    <div class="rp-tendency-feedback-container">
      <!-- Score Cards -->
      <div class="rp-tendency-scores-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-bottom: 24px;">
        <!-- Detail Orientation Score -->
        <div class="rp-score-card" style="padding: 16px; background: white; border: 1px solid #e2e8f0; border-radius: 8px; text-align: center;">
          <h4 style="margin: 0 0 8px 0; font-size: 12px; font-weight: 600; color: #0f172a;">세부 사항 지향</h4>
          <div style="margin-bottom: 8px;">
            <div style="font-size: 28px; font-weight: 700; color: #2f5bff;">
              <%= @reader_tendency.detail_orientation_score || 0 %>
            </div>
            <div style="font-size: 11px; color: #94a3b8;">/ 100</div>
          </div>
          <div class="rp-progress-bar" style="height: 4px; background: #e2e8f0; border-radius: 2px; overflow: hidden;">
            <div style="height: 100%; background: #2f5bff; width: <%= (@reader_tendency.detail_orientation_score || 0) %>%; transition: width 0.3s ease;"></div>
          </div>
        </div>

        <!-- Speed/Accuracy Balance Score -->
        <div class="rp-score-card" style="padding: 16px; background: white; border: 1px solid #e2e8f0; border-radius: 8px; text-align: center;">
          <h4 style="margin: 0 0 8px 0; font-size: 12px; font-weight: 600; color: #0f172a;">속도-정확도 균형</h4>
          <div style="margin-bottom: 8px;">
            <div style="font-size: 28px; font-weight: 700; color: #7c3aed;">
              <%= @reader_tendency.speed_accuracy_balance_score || 0 %>
            </div>
            <div style="font-size: 11px; color: #94a3b8;">/ 100</div>
          </div>
          <div class="rp-progress-bar" style="height: 4px; background: #e2e8f0; border-radius: 2px; overflow: hidden;">
            <div style="height: 100%; background: #7c3aed; width: <%= (@reader_tendency.speed_accuracy_balance_score || 0) %>%; transition: width 0.3s ease;"></div>
          </div>
        </div>

        <!-- Critical Thinking Score -->
        <div class="rp-score-card" style="padding: 16px; background: white; border: 1px solid #e2e8f0; border-radius: 8px; text-align: center;">
          <h4 style="margin: 0 0 8px 0; font-size: 12px; font-weight: 600; color: #0f172a;">비판적 사고</h4>
          <div style="margin-bottom: 8px;">
            <div style="font-size: 28px; font-weight: 700; color: #059669;">
              <%= @reader_tendency.critical_thinking_score || 0 %>
            </div>
            <div style="font-size: 11px; color: #94a3b8;">/ 100</div>
          </div>
          <div class="rp-progress-bar" style="height: 4px; background: #e2e8f0; border-radius: 2px; overflow: hidden;">
            <div style="height: 100%; background: #059669; width: <%= (@reader_tendency.critical_thinking_score || 0) %>%; transition: width 0.3s ease;"></div>
          </div>
        </div>
      </div>

      <!-- Reading Profile -->
      <div class="rp-reading-profile" style="background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px; margin-bottom: 24px;">
        <h3 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #0f172a;">독서 프로필</h3>

        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
          <!-- Reading Speed -->
          <div>
            <div style="font-size: 12px; font-weight: 600; color: #64748b; margin-bottom: 4px;">독서 속도</div>
            <div style="padding: 8px 12px; background: #f8fafc; border-radius: 6px; font-size: 13px; font-weight: 600; color: #0f172a;">
              <%= @reader_tendency.reading_speed&.titleize || "미분류" %>
              <% if @reader_tendency.words_per_minute %>
                <span style="font-size: 11px; color: #64748b; font-weight: 400;">(<%= @reader_tendency.words_per_minute %> WPM)</span>
              <% end %>
            </div>
          </div>

          <!-- Comprehension Strength -->
          <div>
            <div style="font-size: 12px; font-weight: 600; color: #64748b; margin-bottom: 4px;">이해력 강점</div>
            <div style="padding: 8px 12px; background: #f8fafc; border-radius: 6px; font-size: 13px; font-weight: 600; color: #0f172a;">
              <%= @reader_tendency.comprehension_strength&.titleize || "미분석" %>
            </div>
          </div>

          <!-- Avg Response Time -->
          <div>
            <div style="font-size: 12px; font-weight: 600; color: #64748b; margin-bottom: 4px;">평균 응답 시간</div>
            <div style="padding: 8px 12px; background: #f8fafc; border-radius: 6px; font-size: 13px; font-weight: 600; color: #0f172a;">
              <% if @reader_tendency.avg_response_time_seconds %>
                <%= (@reader_tendency.avg_response_time_seconds / 60).round %>분 <%= (@reader_tendency.avg_response_time_seconds % 60).round %>초
              <% else %>
                기록 없음
              <% end %>
            </div>
          </div>

          <!-- Flagging Usage -->
          <div>
            <div style="font-size: 12px; font-weight: 600; color: #64748b; margin-bottom: 4px;">복습 표시 사용</div>
            <div style="padding: 8px 12px; background: #f8fafc; border-radius: 6px; font-size: 13px; font-weight: 600; color: #0f172a;">
              <%= @reader_tendency.uses_flagging ? "✓ 사용함" : "미사용" %>
            </div>
          </div>
        </div>
      </div>

      <!-- Tendency Summary -->
      <% if @reader_tendency.tendency_summary.present? %>
        <div class="rp-tendency-summary" style="background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px; padding: 16px;">
          <h3 style="margin: 0 0 8px 0; font-size: 13px; font-weight: 600; color: #0284c7;">📋 성향 요약</h3>
          <p style="margin: 0; font-size: 12px; line-height: 1.6; color: #0c4a6e; white-space: pre-wrap;">
            <%= @reader_tendency.tendency_summary %>
          </p>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
